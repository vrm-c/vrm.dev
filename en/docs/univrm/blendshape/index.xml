<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>VRM – BlendShape</title><link>https://vrm.dev/en/docs/univrm/blendshape/</link><description>Recent content in BlendShape on VRM</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Fri, 18 Sep 2020 23:07:13 +0900</lastBuildDate><atom:link href="https://vrm.dev/en/docs/univrm/blendshape/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: BlendShape Setting</title><link>https://vrm.dev/en/docs/univrm/blendshape/univrm_blendshape/</link><pubDate>Mon, 16 Apr 2018 16:30:00 +0900</pubDate><guid>https://vrm.dev/en/docs/univrm/blendshape/univrm_blendshape/</guid><description>
&lt;p>New features introduced in UniVRM v0.45:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://vrm.dev/en/docs/univrm/blendshape/blendshape_setup/">BlendShape setting in Inspector&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://vrm.dev/en/docs/univrm/blendshape/univrm_bake_blendshape/">Bake BlendShape state&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="vrmblendshapeproxy">VRMBlendShapeProxy&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;img src="https://vrm.dev/images/vrm/VRMBlendShapeProxy.png" />
&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>The figure above is VRMBlendShapeProxy in the Inspector window at runtime. VRMBlendShapeProxy can be enabled by clicking the play button in edit mode&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>How to use:&lt;/p>
&lt;ul>
&lt;li>Set BlendShapeAvatar &lt;code>VRMBlendShapeProxy-&amp;gt;BlendShapeAvatar&lt;/code> in the Inspector&lt;/li>
&lt;li>Change BlendShapeClip value between 0 and 1 at runtime (e.g. BLINK, JOY)&lt;/li>
&lt;/ul>
&lt;h2 id="blendshapeavatar">BlendShapeAvatar&lt;/h2>
&lt;p>Expressions can be created in the Inspector.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;img src="https://vrm.dev/images/vrm/VRMBlendShapeProxyEditor.png" />
&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Double click the&lt;code>Blend Shape Avatar&lt;/code>field&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>or&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;img src="https://vrm.dev/images/vrm/BlendShapeAvatarAsset.png" />
&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Click&lt;code>BlendShape&lt;/code>directly in the Project view&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;img src="https://vrm.dev/images/vrm/BlendShapeAvatarEditor.png" />
&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>The Inspector of BlendShape editor&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Select expressions and customize the values.
For example, we select&lt;code>Fun&lt;/code>and edit its expressions as shown in the following:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;img src="https://vrm.dev/images/vrm/BlendShapeClip.png" />
&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Example: Set&lt;code>mouth_smile&lt;/code>,&lt;code>eye_smile&lt;/code>and&lt;code>eyeblow_smile&lt;/code>to 100&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The individual blend shapes such as eyebrow, eye and mouth can be merged into one expression like the image above. Created BlendShape names can be specified.&lt;/p>
&lt;p>After changing slider value and creating BlendShape, click the Apply button for saving the current status.&lt;/p>
&lt;h2 id="blendshape-preset">BlendShape preset&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;img src="https://vrm.dev/images/vrm/BlendShape_Preset.png" />
&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Select&lt;code>Preset&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The predefined names for the BlendShape clips. The following predefined expressions are available:&lt;/p>
&lt;h3 id="neutral">NEUTRAL&lt;/h3>
&lt;p>Specified as the standard facial expression and assumed to be used in standby state.&lt;/p>
&lt;h3 id="a-i-u-e-o">A, I, U, E, O&lt;/h3>
&lt;p>Corresponds to the sound of lip-sync&lt;code>aa・ih・ou・E・oh&lt;/code>.&lt;/p>
&lt;h3 id="blink">Blink&lt;/h3>
&lt;p>Eye blink.&lt;/p>
&lt;h3 id="blink_l-blink_r">Blink_L, Blink_R&lt;/h3>
&lt;p>Blinks with only one eye.&lt;/p>
&lt;h3 id="joy-angry-sorrow-fun">Joy, Angry, Sorrow, Fun&lt;/h3>
&lt;p>Emotion.&lt;/p>
&lt;h3 id="lookup-lookdown-lookleft-lookright">LookUp, LookDown, LookLeft, LookRight&lt;/h3>
&lt;p>Used when the model&amp;rsquo;s eyes are controlled by BlendShape.&lt;/p>
&lt;h3 id="unknown">Unknown&lt;/h3>
&lt;p>New created expressions are specified as &amp;ldquo;Unknown&amp;rdquo;.&lt;/p>
&lt;h2 id="change-the-value-of-blendshapeproxy-at-runtime">Change the value of BlendShapeProxy (at runtime)&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;img src="https://vrm.dev/images/vrm/VRMBlendShapeProxyRuntime.png" />
&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>Preset&lt;/code>is used&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>You can operate expressions from the Inspector.&lt;/p>
&lt;h2 id="option-add-additional-facial-expressions">[Option] Add additional facial expressions&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;img src="https://vrm.dev/images/vrm/VRMBlendShapeProxyRuntime.png" />
&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Double click the&lt;code>Blend Shape Avatar&lt;/code>field and click&lt;code>Add BlendShapeClip&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Enter a name for the new BlendShapeClip file (BlendShapeClipName.asset) and save it. Then, select the new generated button in the BlendShapeClip list (the last button) and enter a name. Also, please set facial expression values for new BlendShape clips.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;img src="https://vrm.dev/images/vrm/BlendShapeClipOption.png" />
&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Click the new expression &amp;ldquo;びっくり&amp;rdquo; (surprised)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>You can call it from the codes shown as follows:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-cs" data-lang="cs">&lt;span style="color:#09f;font-style:italic">// Call this expression with string since it belongs to unknown category
&lt;/span>&lt;span style="color:#09f;font-style:italic">&lt;/span>proxy.ImmediatelySetValue(&lt;span style="color:#c30">&amp;#34;びっくり&amp;#34;&lt;/span>, &lt;span style="color:#f60">1.0f&lt;/span>); &lt;span style="color:#09f;font-style:italic">// Assign a value between the range 0~1
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>After the setting is done, don&amp;rsquo;t forget to export VRM file for being able to use the created expressions at runtime.&lt;/p>
&lt;h2 id="option-morph-material-color">[Option] Morph material color&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;img src="https://vrm.dev/images/vrm/BlendShapeClipMaterial.png" />
&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>The setting of Material morph. Double click the&lt;code>Current clip&lt;/code>field or directly select the BlendShape clip (e.g. BlendShape.XXX or your created name) in the Project view&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docs: BlendShape Setup (v0.45)</title><link>https://vrm.dev/en/docs/univrm/blendshape/blendshape_setup/</link><pubDate>Fri, 18 Sep 2020 23:07:13 +0900</pubDate><guid>https://vrm.dev/en/docs/univrm/blendshape/blendshape_setup/</guid><description>
&lt;h2 id="assets-related-to-blendshape">Assets related to BlendShape&lt;/h2>
&lt;p>Once a VRM file is imported, BlendShapeClips (Preset) will be in a folder like this: &lt;code>ModelName.BlendShapes&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/wiki/blendshapeclip_assets.png" alt="image">&lt;/p>
&lt;p>BlendShapeAvatar Asset&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/wiki/blendshapeavatar.png" alt="image">&lt;/p>
&lt;h2 id="setting-screen">Setting screen&lt;/h2>
&lt;p>The Asset has the following setting screens:&lt;/p>
&lt;h3 id="the-inspector-of-blendshapeavatar-asset">The Inspector of BlendShapeAvatar Asset&lt;/h3>
&lt;h4 id="editor-tab">Editor tab&lt;/h4>
&lt;p>BlendShapeClip Selection / Creation&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/wiki/select_blendshapeavatar.png" alt="image">&lt;/p>
&lt;h4 id="list-tab-starting-from-v045">List tab (Starting from v0.45)&lt;/h4>
&lt;p>BlendShapeClip List&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/wiki/list.png" alt="image">&lt;/p>
&lt;h3 id="the-inspector-of-blendshapeclip-asset">The Inspector of BlendShapeClip Asset&lt;/h3>
&lt;h4 id="blendshape-tab">BlendShape tab&lt;/h4>
&lt;p>Create the BlendShape setting:&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/wiki/alicia_binary.png" alt="image">&lt;/p>
&lt;h4 id="blendshape-list-tab">BlendShape List tab&lt;/h4>
&lt;p>You can see the values created from the BlendShape tab.&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/wiki/blendshape_angry.png" alt="image">&lt;/p>
&lt;h4 id="material-list-tab">Material List tab&lt;/h4>
&lt;p>You can create a &lt;a href="https://vrm.dev/en/docs/univrm/lookat/lookat_blendshape/">BlendShape version of LookAt&lt;/a>, change the color with BlendShape, etc.&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/wiki/material_color.png" alt="image">&lt;/p>
&lt;h2 id="blendshapeclip-settings">BlendShapeClip Settings&lt;/h2>
&lt;p>Create a facial expression for a BlendShapeClip (not limited to the face).&lt;/p>
&lt;h3 id="1-select-a-blendshapeclip">1. Select a BlendShapeClip&lt;/h3>
&lt;p>Select a BlendShapeClip from the Inspector of BlendShapeAvatar&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/wiki/select_blendshapeavatar.png" alt="image">&lt;/p>
&lt;p>Or click a BlendShapeClip Asset directly in the Project window&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/wiki/select_blendshapeclip.png" alt="image">&lt;/p>
&lt;h3 id="2-change-the-values-of-the-sliders-to-make-a-facial-expression">2. Change the values of the sliders to make a facial expression&lt;/h3>
&lt;p>The names of the existing &lt;code>SkinnedMeshRenderers&lt;/code> will list in the Inspector window once you click the BlendShape tab.
Click any listed name and you can then adjust the BlendShape value.
The change value is reflected immediately.
The &lt;code>Apply&lt;/code> button is removed starting from v0.45.&lt;/p>
&lt;h3 id="3-check-the-models-blendshape-in-preview">3. Check the model&amp;rsquo;s BlendShape in Preview&lt;/h3>
&lt;p>You can test changes in BlendShape by sliding the value (&lt;code>Preview Weight Slider&lt;/code>) between 0 ~ 1&lt;/p>
&lt;p>Click and drag the &lt;code>left / right&lt;/code> mouse button to change the viewing perspective&lt;/p>
&lt;p>Click and drag the &lt;code>middle&lt;/code> mouse button to move horizontally / vertically&lt;/p>
&lt;h3 id="the-binary-value-setting-for-blendshape-v045">The Binary value setting for BlendShape (v0.45)&lt;/h3>
&lt;p>The Binary option is added into the BlendShape setting in v0.45. It is for users who don&amp;rsquo;t want to display the middle state of the BlendShape. The target value will be automatically rounded off. A BlendShape with the binary setting being active will only have a representative expression like a screenshot.&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/wiki/alicia_binary.png" alt="image">&lt;/p>
&lt;p>This feature will become effective when a v0.45-installed application is loaded&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/wiki/binary.png" alt="image">&lt;/p></description></item><item><title>Docs: Bake BlendShape State When Exporting</title><link>https://vrm.dev/en/docs/univrm/blendshape/univrm_bake_blendshape/</link><pubDate>Mon, 27 Jul 2020 19:28:41 +0900</pubDate><guid>https://vrm.dev/en/docs/univrm/blendshape/univrm_bake_blendshape/</guid><description>
&lt;p>When exporting the VRM model, current BlendShape value can be set to the basic state.
For example, in &lt;code>SkinnedMeshRenderer&lt;/code>, click on &lt;code>BlendShapes&lt;/code> and adjust &lt;code>bs_face.eye_blink&lt;/code> slider to change the value from 0 to 57.8.&lt;/p>
&lt;img src="https://vrm.dev/images/vrm/blendshape_value.jpg" width="400" />
&lt;p>In export dialog, enabling &lt;code>Pose Freeze&lt;/code> is required.&lt;/p>
&lt;img src="https://vrm.dev/images/vrm/check_freeze.jpg" width="400" />
&lt;p>After VRM export:&lt;/p>
&lt;img src="https://vrm.dev/images/vrm/bake_blink.gif" />
&lt;p>Basic state (BlendShape value = 0) is changed (eyes are not open fully).&lt;/p></description></item><item><title>Docs: Check BlandShape Normal</title><link>https://vrm.dev/en/docs/univrm/blendshape/check_blendshape_normal/</link><pubDate>Mon, 16 Nov 2020 11:21:12 +0900</pubDate><guid>https://vrm.dev/en/docs/univrm/blendshape/check_blendshape_normal/</guid><description>
&lt;p>Since Unity 2018, when importing fbx into Unity, the BlendShape normal is automatically recalculated. As a result, there is a possibility that artifacts are produced on the model&amp;rsquo;s surface.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Details&lt;/h4>
If the BlendShape normal is (0, 0, 0), the value of the surface normal should not be changed. It seems that the original BlendShape normal is replaced by the recalculated BlendShape normal, resulting in unexpected changes on the model&amp;rsquo;s surface
&lt;/div>
&lt;h2 id="validate-surface-normal-using-mtoons-debugging-options">Validate surface normal using MToon&amp;rsquo;s debugging options&lt;/h2>
&lt;p>Drag fbx to the Hierarchy window and select it. In the Inspector, click &lt;code>Select -&amp;gt; Materials -&amp;gt; Extract Materials&lt;/code> and choose a folder to save these materials.
Next, select all materials and change &lt;code>Shader&lt;/code> to &lt;code>VRM/MToon&lt;/code>.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Surface normal validation&lt;/h4>
At this point we set all the materials to MToon for surface normal validation only, so setting up textures&amp;rsquo; properties is not required.
&lt;/div>
&lt;p>To visualize the surface normal, go to &lt;code>Options - Debugging Options - Visualize&lt;/code> and select &lt;code>Normal&lt;/code>:&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/vrm/mtoon_normal.gif" alt="debug normal">&lt;/p>
&lt;p>Select a GameObject containing &lt;code>SkinnedMeshRenderer&lt;/code> with BlendShape. Drag the slider while observing surface normals:&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/vrm/broken_normal.jpg" alt="debug normal">&lt;/p>
&lt;p>We can see surface normals around nose tip and mouth are not correct.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Steps to reproduce:&lt;/h4>
&lt;ul>
&lt;li>Import VRoid model into Blender&lt;/li>
&lt;li>Export vrm as fbx&lt;/li>
&lt;li>Import fbx into Unity&lt;/li>
&lt;/ul>
&lt;/div>
&lt;h2 id="fix-blendshape-normal">Fix BlendShape normal&lt;/h2>
&lt;p>To fix BlendShape normal, in the fbx&amp;rsquo;s inspector, click &lt;code>Select -&amp;gt; Model -&amp;gt; Legacy Blend Shape Normals&lt;/code> and check the box.&lt;/p>
&lt;p>Now confirm whether the BlendShape normal has been fixed:&lt;/p>
&lt;p>&lt;img src="https://vrm.dev/images/vrm/legacy_normal_fixed.jpg" alt="fixed normal">&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Compare with the previous results&lt;/h4>
Surface normals around the norse tip and mouth (e.g. tongue, lower lip) are totally different
&lt;/div></description></item></channel></rss>